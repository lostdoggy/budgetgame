<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUDGET NEMESIS</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --neon-pink: #ff006e;
            --neon-cyan: #00f5ff;
            --neon-purple: #8338ec;
            --neon-red: #ff0054;
            --neon-yellow: #ffbe0b;
            --dark-bg: #0d0221;
            --darker-bg: #080118;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background: 
                linear-gradient(180deg, var(--darker-bg) 0%, var(--dark-bg) 50%, #1a0b2e 100%);
            color: var(--neon-cyan);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* VHS/CRT Effects */
        .vhs-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            background: 
                repeating-linear-gradient(
                    0deg,
                    rgba(0, 0, 0, 0.1),
                    rgba(0, 0, 0, 0.1) 1px,
                    transparent 1px,
                    transparent 3px
                );
            animation: vhsNoise 0.5s infinite;
        }

        @keyframes vhsNoise {
            0%, 100% { opacity: 0.05; }
            50% { opacity: 0.1; }
        }

        .vignette {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.8) 100%);
            pointer-events: none;
            z-index: 9998;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        h1 {
            font-size: 4rem;
            font-weight: 900;
            color: var(--neon-pink);
            text-shadow: 
                0 0 10px var(--neon-pink),
                0 0 20px var(--neon-pink),
                0 0 40px var(--neon-pink),
                0 0 80px var(--neon-red),
                0 8px 0 rgba(0,0,0,0.5);
            letter-spacing: 8px;
            animation: flicker 3s infinite;
            margin-bottom: 10px;
        }

        @keyframes flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
                text-shadow: 
                    0 0 10px var(--neon-pink),
                    0 0 20px var(--neon-pink),
                    0 0 40px var(--neon-pink),
                    0 0 80px var(--neon-red);
            }
            20%, 24%, 55% {
                text-shadow: none;
            }
        }

        .subtitle {
            font-size: 1.2rem;
            color: var(--neon-cyan);
            text-shadow: 0 0 10px var(--neon-cyan);
            letter-spacing: 4px;
        }

        .month-banner {
            background: linear-gradient(90deg, transparent, var(--neon-purple) 20%, var(--neon-purple) 80%, transparent);
            padding: 20px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--neon-yellow);
            text-shadow: 0 0 20px var(--neon-yellow);
            margin-bottom: 30px;
            border-top: 2px solid var(--neon-cyan);
            border-bottom: 2px solid var(--neon-cyan);
            box-shadow: 0 0 30px rgba(131, 56, 236, 0.5);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(13, 2, 33, 0.9), rgba(26, 11, 46, 0.9));
            border: 2px solid var(--neon-cyan);
            padding: 25px;
            text-align: center;
            box-shadow: 
                0 0 20px rgba(0, 245, 255, 0.3),
                inset 0 0 20px rgba(0, 245, 255, 0.1);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 0 40px rgba(0, 245, 255, 0.6),
                inset 0 0 30px rgba(0, 245, 255, 0.2);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--neon-purple);
            text-shadow: 0 0 10px var(--neon-purple);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .stat-value {
            font-size: 3rem;
            font-weight: 900;
            color: var(--neon-pink);
            text-shadow: 0 0 20px var(--neon-pink);
        }

        .battle-screen {
            background: linear-gradient(135deg, rgba(13, 2, 33, 0.95), rgba(8, 1, 24, 0.95));
            border: 3px solid var(--neon-pink);
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 
                0 0 50px rgba(255, 0, 110, 0.5),
                inset 0 0 50px rgba(255, 0, 110, 0.1);
            position: relative;
        }

        .health-bars {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 50px;
        }

        .health-label {
            font-size: 1rem;
            margin-bottom: 15px;
            letter-spacing: 3px;
            text-shadow: 0 0 10px currentColor;
        }

        .player-label { color: var(--neon-cyan); }
        .nemesis-label { color: var(--neon-red); }

        .health-bar-container {
            background: rgba(0,0,0,0.8);
            border: 2px solid;
            height: 40px;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.5);
        }

        .player-bar { border-color: var(--neon-cyan); }
        .nemesis-bar { border-color: var(--neon-red); }

        .health-fill {
            height: 100%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            position: relative;
            z-index: 2;
            text-shadow: 2px 2px 4px #000;
        }

        .player-health {
            background: linear-gradient(90deg, var(--neon-cyan), #00d4ff);
            box-shadow: 0 0 20px var(--neon-cyan);
            color: #fff;
        }

        .nemesis-health {
            background: linear-gradient(90deg, var(--neon-red), #ff4466);
            box-shadow: 0 0 20px var(--neon-red);
            color: #fff;
        }

        /* Stranger Things Style Monster */
        .monster-container {
            width: 300px;
            height: 300px;
            margin: 30px auto;
            position: relative;
            filter: drop-shadow(0 0 40px var(--neon-red));
        }

        .monster {
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at center, 
                    var(--neon-red) 0%,
                    #aa0030 40%,
                    #660020 100%);
            position: relative;
            border-radius: 40% 40% 45% 45%;
            animation: monsterPulse 2s ease-in-out infinite;
            box-shadow: 
                inset -30px -30px 50px rgba(0,0,0,0.5),
                inset 20px 20px 40px rgba(255,0,0,0.3),
                0 0 60px var(--neon-red);
        }

        @keyframes monsterPulse {
            0%, 100% { transform: scale(1) translateY(0); }
            50% { transform: scale(1.05) translateY(-15px); }
        }

        .monster.damaged {
            animation: monsterShake 0.5s;
        }

        @keyframes monsterShake {
            0%, 100% { transform: translateX(0) rotate(0deg); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-10px) rotate(-2deg); }
            20%, 40%, 60%, 80% { transform: translateX(10px) rotate(2deg); }
        }

        /* Glowing Eyes */
        .eyes {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 180px;
            display: flex;
            justify-content: space-between;
        }

        .eye {
            width: 60px;
            height: 60px;
            background: 
                radial-gradient(circle at 30% 30%, 
                    var(--neon-yellow) 0%,
                    var(--neon-red) 60%,
                    #660000 100%);
            border-radius: 50%;
            box-shadow: 
                0 0 30px var(--neon-yellow),
                0 0 60px var(--neon-red),
                inset 0 0 20px rgba(0,0,0,0.5);
            animation: eyeGlow 2s infinite;
            position: relative;
        }

        @keyframes eyeGlow {
            0%, 100% { 
                box-shadow: 
                    0 0 30px var(--neon-yellow),
                    0 0 60px var(--neon-red);
            }
            50% { 
                box-shadow: 
                    0 0 50px var(--neon-yellow),
                    0 0 100px var(--neon-red),
                    0 0 120px rgba(255,0,0,0.5);
            }
        }

        .pupil {
            position: absolute;
            width: 25px;
            height: 25px;
            background: #000;
            border-radius: 50%;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 10px rgba(0,0,0,0.8);
        }

        /* Angry Eyebrows */
        .eyebrow-left {
            position: absolute;
            top: 60px;
            left: 45px;
            width: 70px;
            height: 12px;
            background: linear-gradient(90deg, transparent, #000 20%, #000 80%, transparent);
            transform: rotate(15deg);
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }

        .eyebrow-right {
            position: absolute;
            top: 60px;
            right: 45px;
            width: 70px;
            height: 12px;
            background: linear-gradient(90deg, transparent, #000 20%, #000 80%, transparent);
            transform: rotate(-15deg);
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
        }

        /* Mouth with fangs */
        .mouth {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 140px;
            height: 45px;
            background: #000;
            border-radius: 0 0 70px 70px / 0 0 50px 50px;
            box-shadow: 
                inset 0 -20px 30px rgba(255,0,0,0.6),
                0 5px 15px rgba(0,0,0,0.8);
            border: 3px solid #000;
            border-top: none;
            z-index: 1;
        }

        .fangs {
            position: absolute;
            bottom: 62px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 2;
        }

        .fang {
            width: 0;
            height: 0;
            border-left: 14px solid transparent;
            border-right: 14px solid transparent;
            border-top: 35px solid #fff;
            filter: drop-shadow(3px 3px 5px rgba(0,0,0,0.8));
            animation: fangGlint 4s infinite;
        }

        @keyframes fangGlint {
            0%, 90%, 100% { opacity: 1; }
            95% { opacity: 0.7; }
        }

        /* Horns */
        .horn {
            position: absolute;
            top: -20px;
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-bottom: 60px solid var(--neon-yellow);
            filter: drop-shadow(0 0 20px var(--neon-yellow));
        }

        .horn-left {
            left: 40px;
            transform: rotate(-20deg);
        }

        .horn-right {
            right: 40px;
            transform: rotate(20deg);
        }

        /* Spikes */
        .spike {
            position: absolute;
            width: 0;
            height: 0;
            border-top: 18px solid transparent;
            border-bottom: 18px solid transparent;
            filter: drop-shadow(0 0 10px rgba(170,0,48,0.8));
        }

        .spike-left {
            left: -25px;
            border-right: 35px solid #aa0030;
        }

        .spike-left-1 { top: 35%; }
        .spike-left-2 { top: 50%; }
        .spike-left-3 { top: 65%; }

        .spike-right {
            right: -25px;
            border-left: 35px solid #aa0030;
        }

        .spike-right-1 { top: 35%; }
        .spike-right-2 { top: 50%; }
        .spike-right-3 { top: 65%; }

        /* Taunt */
        .taunt {
            position: absolute;
            top: -80px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--neon-yellow);
            color: #000;
            padding: 15px 25px;
            border: 3px solid #000;
            font-weight: 700;
            font-size: 0.9rem;
            white-space: nowrap;
            box-shadow: 
                0 0 30px var(--neon-yellow),
                5px 5px 0 rgba(0,0,0,0.3);
            animation: tauntBounce 0.4s;
        }

        @keyframes tauntBounce {
            0% { transform: translateX(-50%) scale(0) rotate(-10deg); }
            50% { transform: translateX(-50%) scale(1.1) rotate(5deg); }
            100% { transform: translateX(-50%) scale(1) rotate(0deg); }
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 140px;
            padding: 18px 25px;
            background: linear-gradient(135deg, rgba(13,2,33,0.9), rgba(26,11,46,0.9));
            border: 2px solid var(--neon-purple);
            color: var(--neon-cyan);
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            letter-spacing: 2px;
            box-shadow: 0 0 15px rgba(131,56,236,0.3);
        }

        .tab:hover {
            background: linear-gradient(135deg, var(--neon-purple), rgba(131,56,236,0.8));
            transform: translateY(-3px);
            box-shadow: 0 0 30px rgba(131,56,236,0.6);
        }

        .tab.active {
            background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));
            border-color: var(--neon-pink);
            color: #fff;
            box-shadow: 0 0 40px rgba(255,0,110,0.8);
        }

        .panel {
            background: linear-gradient(135deg, rgba(13,2,33,0.95), rgba(8,1,24,0.95));
            border: 2px solid var(--neon-cyan);
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 
                0 0 30px rgba(0,245,255,0.3),
                inset 0 0 30px rgba(0,245,255,0.05);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: slideIn 0.4s;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        label {
            display: block;
            color: var(--neon-yellow);
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 2px;
            text-shadow: 0 0 10px var(--neon-yellow);
        }

        input, select {
            width: 100%;
            padding: 15px;
            background: rgba(0,0,0,0.7);
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            font-family: 'Orbitron', sans-serif;
            font-size: 1rem;
            margin-bottom: 20px;
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.5),
                0 0 15px rgba(0,245,255,0.2);
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--neon-pink);
            box-shadow: 
                inset 0 0 20px rgba(0,0,0,0.5),
                0 0 30px rgba(255,0,110,0.5);
        }

        button {
            background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));
            color: #fff;
            border: none;
            padding: 18px 35px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            letter-spacing: 2px;
            transition: all 0.3s;
            box-shadow: 
                0 5px 25px rgba(255,0,110,0.5),
                inset 0 0 20px rgba(255,255,255,0.1);
            text-transform: uppercase;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 
                0 10px 40px rgba(255,0,110,0.8),
                inset 0 0 30px rgba(255,255,255,0.2);
        }

        button:active {
            transform: translateY(-1px);
        }

        .transaction-item {
            background: rgba(0,0,0,0.6);
            border-left: 4px solid var(--neon-cyan);
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0,245,255,0.2);
        }

        .transaction-item:hover {
            background: rgba(0,245,255,0.1);
            border-left-color: var(--neon-pink);
            transform: translateX(5px);
            box-shadow: 0 0 25px rgba(0,245,255,0.4);
        }

        .achievement {
            background: linear-gradient(135deg, rgba(0,245,255,0.1), rgba(131,56,236,0.1));
            border: 2px solid var(--neon-cyan);
            padding: 25px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 25px;
            transition: all 0.3s;
            box-shadow: 0 0 20px rgba(0,245,255,0.3);
        }

        .achievement:hover {
            background: linear-gradient(135deg, rgba(0,245,255,0.2), rgba(131,56,236,0.2));
            transform: translateX(8px);
            box-shadow: 0 0 35px rgba(0,245,255,0.5);
        }

        .achievement.locked {
            opacity: 0.3;
            filter: grayscale(100%);
        }

        .achievement-icon {
            font-size: 3rem;
            min-width: 60px;
        }

        .achievement-name {
            font-size: 1.2rem;
            color: var(--neon-pink);
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 0 0 15px var(--neon-pink);
        }

        .achievement-desc {
            color: var(--neon-cyan);
            font-size: 0.9rem;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, var(--dark-bg), var(--darker-bg));
            border: 4px solid var(--neon-pink);
            padding: 50px;
            max-width: 600px;
            text-align: center;
            box-shadow: 
                0 0 100px rgba(255,0,110,0.8),
                inset 0 0 50px rgba(255,0,110,0.2);
            animation: modalPop 0.5s;
        }

        @keyframes modalPop {
            0% { transform: scale(0.5) rotate(-5deg); opacity: 0; }
            50% { transform: scale(1.05) rotate(2deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .modal-title {
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--neon-pink);
            margin-bottom: 25px;
            text-shadow: 0 0 30px var(--neon-pink);
        }

        .modal-message {
            font-size: 1.2rem;
            color: var(--neon-cyan);
            margin-bottom: 35px;
            line-height: 1.8;
        }

        .damage-indicator {
            position: fixed;
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--neon-red);
            text-shadow: 
                0 0 20px var(--neon-red),
                3px 3px 0 #000;
            pointer-events: none;
            z-index: 9999;
            animation: damageFloat 1.5s ease-out forwards;
        }

        @keyframes damageFloat {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-120px) scale(1.5); opacity: 0; }
        }

        .category-item {
            background: rgba(0,0,0,0.6);
            border: 2px solid var(--neon-purple);
            padding: 15px;
            margin-bottom: 10px;
            font-size: 0.9rem;
            box-shadow: 0 0 15px rgba(131,56,236,0.3);
        }

        .history-month {
            background: rgba(0,0,0,0.7);
            border: 2px solid var(--neon-pink);
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 0 25px rgba(255,0,110,0.3);
        }

        .history-result {
            padding: 12px 25px;
            font-weight: 700;
            font-size: 1.1rem;
            border: 2px solid;
        }

        .history-result.victory {
            background: rgba(0,245,255,0.2);
            border-color: var(--neon-cyan);
            color: var(--neon-cyan);
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        .history-result.defeat {
            background: rgba(255,0,110,0.2);
            border-color: var(--neon-red);
            color: var(--neon-red);
            box-shadow: 0 0 20px var(--neon-red);
        }

        .category-manager {
            display: grid;
            grid-template-columns: 2fr 1fr auto;
            gap: 15px;
            align-items: center;
            margin-bottom: 15px;
        }

        .delete-btn {
            background: linear-gradient(135deg, var(--neon-red), #aa0030);
            padding: 12px 20px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2.5rem; }
            .monster-container { width: 200px; height: 200px; }
            .health-bars { grid-template-columns: 1fr; }
            .tabs { flex-direction: column; }
            .category-manager { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="vhs-overlay"></div>
    <div class="vignette"></div>
    
    <div class="container">
        <header>
            <h1>BUDGET NEMESIS</h1>
            <p class="subtitle">FINANCIAL HORROR GAME</p>
        </header>

        <div class="month-banner" id="monthDisplay">LOADING...</div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">VICTORIES</div>
                <div class="stat-value" id="victories">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">DEFEATS</div>
                <div class="stat-value" id="defeats">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">WIN STREAK</div>
                <div class="stat-value" id="winStreak">0</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">DAYS LEFT</div>
                <div class="stat-value" id="daysLeft">--</div>
            </div>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('battle')">BATTLE</div>
            <div class="tab" onclick="switchTab('transactions')">LOG</div>
            <div class="tab" onclick="switchTab('achievements')">TROPHIES</div>
            <div class="tab" onclick="switchTab('history')">HISTORY</div>
            <div class="tab" onclick="switchTab('settings')">SETTINGS</div>
        </div>

        <div id="battle" class="tab-content active">
            <div class="battle-screen">
                <div class="health-bars">
                    <div>
                        <div class="health-label player-label">YOU - BUDGET WARRIOR</div>
                        <div class="health-bar-container player-bar">
                            <div class="health-fill player-health" id="playerHealth" style="width: 100%">
                                HP: 100%
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="health-label nemesis-label">OVERSPENDING NEMESIS</div>
                        <div class="health-bar-container nemesis-bar">
                            <div class="health-fill nemesis-health" id="nemesisHealth" style="width: 100%">
                                HP: 100%
                            </div>
                        </div>
                    </div>
                </div>

                <div class="monster-container">
                    <div class="monster" id="monster">
                        <div class="horn horn-left"></div>
                        <div class="horn horn-right"></div>
                        <div class="spike spike-left spike-left-1"></div>
                        <div class="spike spike-left spike-left-2"></div>
                        <div class="spike spike-left spike-left-3"></div>
                        <div class="spike spike-right spike-right-1"></div>
                        <div class="spike spike-right spike-right-2"></div>
                        <div class="spike spike-right spike-right-3"></div>
                        <div class="eyebrow-left"></div>
                        <div class="eyebrow-right"></div>
                        <div class="eyes">
                            <div class="eye"><div class="pupil"></div></div>
                            <div class="eye"><div class="pupil"></div></div>
                        </div>
                        <div class="fangs">
                            <div class="fang"></div>
                            <div class="fang"></div>
                            <div class="fang"></div>
                            <div class="fang"></div>
                        </div>
                        <div class="mouth"></div>
                        <div id="tauntBubble"></div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <label>CATEGORY</label>
                <select id="category"></select>

                <label>AMOUNT $</label>
                <input type="number" id="amount" placeholder="0.00" step="0.01">

                <label>DESCRIPTION</label>
                <input type="text" id="description" placeholder="WHAT DID YOU BUY?">

                <button onclick="addTransaction()" style="width: 100%;">
                    ENTER SPENDING
                </button>
            </div>
        </div>

        <div id="transactions" class="tab-content">
            <div class="panel">
                <h2 style="color: var(--neon-pink); margin-bottom: 25px; font-size: 1.5rem; text-shadow: 0 0 20px var(--neon-pink);">
                    CURRENT MONTH LOG
                </h2>
                <div id="transactionList"></div>
            </div>
        </div>

        <div id="achievements" class="tab-content">
            <div class="panel">
                <h2 style="color: var(--neon-pink); margin-bottom: 25px; font-size: 1.5rem; text-shadow: 0 0 20px var(--neon-pink);">
                    ACHIEVEMENTS UNLOCKED
                </h2>
                <div id="achievementList"></div>
            </div>
        </div>

        <div id="history" class="tab-content">
            <div class="panel">
                <h2 style="color: var(--neon-pink); margin-bottom: 25px; font-size: 1.5rem; text-shadow: 0 0 20px var(--neon-pink);">
                    BATTLE HISTORY
                </h2>
                <div id="historyList"></div>
            </div>
        </div>

        <div id="settings" class="tab-content">
            <div class="panel">
                <h2 style="color: var(--neon-pink); margin-bottom: 25px; font-size: 1.5rem; text-shadow: 0 0 20px var(--neon-pink);">
                    CATEGORY MANAGER
                </h2>
                <div id="categoryManager"></div>
                <button onclick="addNewCategory()" style="width: 100%; margin-top: 20px;">
                    + ADD NEW CATEGORY
                </button>
            </div>

            <div class="panel" style="border-color: var(--neon-red);">
                <h2 style="color: var(--neon-red); margin-bottom: 25px; font-size: 1.5rem; text-shadow: 0 0 20px var(--neon-red);">
                    DANGER ZONE
                </h2>
                <button onclick="resetCurrentMonth()" style="background: linear-gradient(135deg, var(--neon-yellow), var(--neon-purple)); margin-bottom: 15px; width: 100%;">
                    RESET THIS MONTH
                </button>
                <button onclick="resetAllData()" style="background: linear-gradient(135deg, var(--neon-red), #aa0030); width: 100%;">
                    RESET ALL DATA
                </button>
            </div>

            <div class="panel">
                <h2 style="color: var(--neon-cyan); margin-bottom: 25px; font-size: 1.5rem; text-shadow: 0 0 20px var(--neon-cyan);">
                    DATA BACKUP
                </h2>
                <button onclick="exportData()" style="background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple)); margin-bottom: 15px; width: 100%;">
                    EXPORT DATA
                </button>
                <button onclick="document.getElementById('importFile').click()" style="background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink)); width: 100%;">
                    IMPORT DATA
                </button>
                <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
            </div>
        </div>
    </div>

    <div class="modal" id="victoryModal">
        <div class="modal-content">
            <h2 class="modal-title">VICTORY!</h2>
            <p class="modal-message" id="victoryMessage"></p>
            <button onclick="closeModal()">CONTINUE</button>
        </div>
    </div>

    <div class="modal" id="defeatModal">
        <div class="modal-content" style="border-color: var(--neon-red);">
            <h2 class="modal-title" style="color: var(--neon-red); text-shadow: 0 0 30px var(--neon-red);">GAME OVER</h2>
            <p class="modal-message" id="defeatMessage"></p>
            <button onclick="closeModal()">CONTINUE</button>
        </div>
    </div>

    <script>
        let gameState = {
            currentMonth: '',
            playerHealth: 100,
            nemesisHealth: 100,
            victories: 0,
            defeats: 0,
            winStreak: 0,
            totalDamageDealt: 0,
            lastLogDate: null,
            consecutiveLogDays: 0,
            maxConsecutiveLogDays: 0,
            zeroSpendDays: 0,
            maxZeroSpendStreak: 0,
            currentZeroSpendStreak: 0,
            budgets: {
                'Shopping': 500,
                'Dining': 150,
                'Groceries': 540,
                'Transportation': 150,
                'Home Improvement': 200,
                'Healthcare': 356,
                'Professional': 396,
                'Utilities': 590,
                'Miscellaneous': 200
            },
            currentSpending: {},
            currentTransactions: [],
            history: [],
            achievements: {
                'First Entry': { unlocked: false, name: 'First Entry', desc: 'Log your first transaction', icon: 'ðŸ“' },
                'Daily Logger': { unlocked: false, name: 'Daily Logger', desc: 'Log transactions 7 days in a row', icon: 'ðŸ“…' },
                'Dedicated Tracker': { unlocked: false, name: 'Dedicated Tracker', desc: 'Log transactions 30 days in a row', icon: 'ðŸ”¥' },
                'No Spend Day': { unlocked: false, name: 'No Spend Day', desc: 'Go one day without spending', icon: 'ðŸš«' },
                'No Spend Week': { unlocked: false, name: 'No Spend Week', desc: 'Achieve 7 zero-spend days', icon: 'â­' },
                'Budget Master': { unlocked: false, name: 'Budget Master', desc: 'Stay under budget for one month', icon: 'ðŸ‘‘' },
                'Budget Warrior': { unlocked: false, name: 'Budget Warrior', desc: 'Stay under budget 3 months in a row', icon: 'âš”ï¸' },
                'Budget Legend': { unlocked: false, name: 'Budget Legend', desc: 'Stay under budget 6 months in a row', icon: 'ðŸ†' }
            }
        };

        const taunts = [
            "BUY MORE STUFF!",
            "YOU'RE BROKE!",
            "NICE TRY!",
            "GIMME YOUR MONEY!",
            "WEAK SAUCE!",
            "IS THAT ALL?",
            "HA HA HA!",
            "SPEND MORE!",
            "I'M WINNING!"
        ];

        function init() {
            loadGameState();
            checkMonthReset();
            initializeCurrentMonth();
            checkDailyProgress();
            updateDisplay();
            updateBattleScreen();
            updateAchievements();
            updateHistory();
            updateCategoryDropdown();
        }

        function getCurrentMonthKey() {
            const now = new Date();
            return `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}`;
        }

        function checkMonthReset() {
            const currentMonthKey = getCurrentMonthKey();
            
            if (gameState.currentMonth !== currentMonthKey) {
                if (gameState.currentMonth && gameState.currentTransactions.length > 0) {
                    saveMonthToHistory();
                }
                
                gameState.currentMonth = currentMonthKey;
                gameState.playerHealth = 100;
                gameState.nemesisHealth = 100;
                gameState.currentSpending = {};
                gameState.currentTransactions = [];
                
                Object.keys(gameState.budgets).forEach(cat => {
                    gameState.currentSpending[cat] = 0;
                });
                
                saveGameState();
            }
        }

        function initializeCurrentMonth() {
            if (!gameState.currentSpending || Object.keys(gameState.currentSpending).length === 0) {
                gameState.currentSpending = {};
                Object.keys(gameState.budgets).forEach(cat => {
                    gameState.currentSpending[cat] = 0;
                });
            }
        }

        function saveMonthToHistory() {
            const totalBudget = Object.values(gameState.budgets).reduce((a, b) => a + b, 0);
            const totalSpent = Object.values(gameState.currentSpending).reduce((a, b) => a + b, 0);
            const victory = totalSpent <= totalBudget;
            
            const historyEntry = {
                month: gameState.currentMonth,
                playerHealth: gameState.playerHealth,
                nemesisHealth: gameState.nemesisHealth,
                totalBudget: totalBudget,
                totalSpent: totalSpent,
                spending: { ...gameState.currentSpending },
                transactions: [...gameState.currentTransactions],
                result: victory ? 'victory' : 'defeat',
                date: new Date().toISOString()
            };
            
            gameState.history.unshift(historyEntry);
            
            if (gameState.history.length > 12) {
                gameState.history = gameState.history.slice(0, 12);
            }
            
            if (victory) {
                gameState.victories++;
                gameState.winStreak++;
            } else {
                gameState.defeats++;
                gameState.winStreak = 0;
            }
        }

        function getDaysLeftInMonth() {
            const now = new Date();
            const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0);
            return lastDay.getDate() - now.getDate();
        }

        function updateDisplay() {
            const now = new Date();
            const monthName = now.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            document.getElementById('monthDisplay').textContent = `CURRENT BATTLE: ${monthName.toUpperCase()}`;
            
            document.getElementById('victories').textContent = gameState.victories;
            document.getElementById('defeats').textContent = gameState.defeats;
            document.getElementById('winStreak').textContent = gameState.winStreak;
            document.getElementById('daysLeft').textContent = getDaysLeftInMonth();
            
            updateTransactionList();
        }

        function updateBattleScreen() {
            const playerBar = document.getElementById('playerHealth');
            const nemesisBar = document.getElementById('nemesisHealth');
            
            playerBar.style.width = gameState.playerHealth + '%';
            playerBar.textContent = `HP: ${Math.round(gameState.playerHealth)}%`;
            
            nemesisBar.style.width = gameState.nemesisHealth + '%';
            nemesisBar.textContent = `HP: ${Math.round(gameState.nemesisHealth)}%`;
        }

        function calculateHealth() {
            const totalBudget = Object.values(gameState.budgets).reduce((a, b) => a + b, 0);
            const totalSpent = Object.values(gameState.currentSpending).reduce((a, b) => a + b, 0);
            
            gameState.playerHealth = Math.max(0, ((totalBudget - totalSpent) / totalBudget) * 100);
            
            const savedAmount = Math.max(0, totalBudget - totalSpent);
            const nemesisDamage = (savedAmount / totalBudget) * 100;
            gameState.nemesisHealth = Math.max(0, 100 - nemesisDamage);
            
            updateBattleScreen();
        }

        function showTaunt(message) {
            const bubble = document.getElementById('tauntBubble');
            bubble.className = 'taunt';
            bubble.textContent = message;
            
            setTimeout(() => {
                bubble.className = '';
                bubble.textContent = '';
            }, 2000);
        }

        function showDamageIndicator(amount, x, y) {
            const damage = document.createElement('div');
            damage.className = 'damage-indicator';
            damage.textContent = `-$${amount.toFixed(2)}`;
            damage.style.left = x + 'px';
            damage.style.top = y + 'px';
            document.body.appendChild(damage);
            
            setTimeout(() => damage.remove(), 1500);
        }

        function addTransaction() {
            const category = document.getElementById('category').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const description = document.getElementById('description').value;

            if (!category) {
                alert('Please select a category!');
                return;
            }

            if (!amount || amount <= 0) {
                alert('Please enter a valid amount!');
                return;
            }

            const transaction = {
                id: Date.now(),
                category,
                amount,
                description,
                date: new Date().toISOString()
            };

            gameState.currentTransactions.unshift(transaction);
            
            if (!gameState.currentSpending[category]) {
                gameState.currentSpending[category] = 0;
            }
            gameState.currentSpending[category] += amount;

            const today = new Date().toDateString();
            if (gameState.lastLogDate !== today) {
                const yesterday = new Date(Date.now() - 86400000).toDateString();
                if (gameState.lastLogDate === yesterday) {
                    gameState.consecutiveLogDays++;
                } else {
                    gameState.consecutiveLogDays = 1;
                }
                gameState.lastLogDate = today;
                gameState.maxConsecutiveLogDays = Math.max(gameState.maxConsecutiveLogDays, gameState.consecutiveLogDays);
                gameState.currentZeroSpendStreak = 0;
            }

            const x = Math.random() * (window.innerWidth - 200) + 100;
            const y = Math.random() * 300 + 100;
            showDamageIndicator(amount, x, y);

            const taunt = taunts[Math.floor(Math.random() * taunts.length)];
            showTaunt(taunt);

            document.getElementById('monster').classList.add('damaged');
            setTimeout(() => {
                document.getElementById('monster').classList.remove('damaged');
            }, 500);

            calculateHealth();
            checkAchievements();
            checkGameOver();
            updateDisplay();
            saveGameState();

            document.getElementById('amount').value = '';
            document.getElementById('description').value = '';
        }

        function checkGameOver() {
            if (gameState.playerHealth <= 0) {
                showModal('defeatModal', 
                    'GAME OVER!',
                    'YOU HAVE BEEN DEFEATED BY THE NEMESIS!<br><br>YOU OVERSPENT YOUR BUDGET!');
            } else if (gameState.nemesisHealth <= 0) {
                showModal('victoryModal',
                    'VICTORY!',
                    'YOU DEFEATED THE OVERSPENDING NEMESIS!<br><br>EXCELLENT BUDGET CONTROL!');
            }
        }

        function checkAchievements() {
            const achievements = gameState.achievements;

            if (gameState.currentTransactions.length >= 1 && !achievements['First Entry'].unlocked) {
                achievements['First Entry'].unlocked = true;
                showAchievementUnlock('First Entry');
            }

            if (gameState.consecutiveLogDays >= 7 && !achievements['Daily Logger'].unlocked) {
                achievements['Daily Logger'].unlocked = true;
                showAchievementUnlock('Daily Logger');
            }

            if (gameState.consecutiveLogDays >= 30 && !achievements['Dedicated Tracker'].unlocked) {
                achievements['Dedicated Tracker'].unlocked = true;
                showAchievementUnlock('Dedicated Tracker');
            }

            if (gameState.currentZeroSpendStreak >= 1 && !achievements['No Spend Day'].unlocked) {
                achievements['No Spend Day'].unlocked = true;
                showAchievementUnlock('No Spend Day');
            }

            if (gameState.zeroSpendDays >= 7 && !achievements['No Spend Week'].unlocked) {
                achievements['No Spend Week'].unlocked = true;
                showAchievementUnlock('No Spend Week');
            }

            if (gameState.victories >= 1 && !achievements['Budget Master'].unlocked) {
                achievements['Budget Master'].unlocked = true;
                showAchievementUnlock('Budget Master');
            }

            if (gameState.winStreak >= 3 && !achievements['Budget Warrior'].unlocked) {
                achievements['Budget Warrior'].unlocked = true;
                showAchievementUnlock('Budget Warrior');
            }

            if (gameState.winStreak >= 6 && !achievements['Budget Legend'].unlocked) {
                achievements['Budget Legend'].unlocked = true;
                showAchievementUnlock('Budget Legend');
            }

            updateAchievements();
        }

        function showAchievementUnlock(achievementName) {
            const achievement = gameState.achievements[achievementName];
            showModal('victoryModal', 
                'ACHIEVEMENT UNLOCKED!', 
                `${achievement.icon} ${achievement.name}<br><br>${achievement.desc}`);
        }

        function updateAchievements() {
            const list = document.getElementById('achievementList');
            if (!list) return;
            
            list.innerHTML = '';

            Object.entries(gameState.achievements).forEach(([key, achievement]) => {
                const item = document.createElement('div');
                item.className = 'achievement' + (achievement.unlocked ? '' : ' locked');
                item.innerHTML = `
                    <div class="achievement-icon">${achievement.icon}</div>
                    <div style="flex: 1;">
                        <div class="achievement-name">${achievement.name}</div>
                        <div class="achievement-desc">${achievement.desc}</div>
                    </div>
                    <div style="font-size: 2rem;">
                        ${achievement.unlocked ? 'âœ…' : 'ðŸ”’'}
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function checkDailyProgress() {
            const today = new Date().toDateString();
            const lastTransactionToday = gameState.currentTransactions.some(t => {
                return new Date(t.date).toDateString() === today;
            });

            if (!lastTransactionToday && gameState.lastLogDate) {
                const yesterday = new Date(Date.now() - 86400000).toDateString();
                if (gameState.lastLogDate === yesterday) {
                    gameState.currentZeroSpendStreak++;
                    gameState.zeroSpendDays++;
                    gameState.maxZeroSpendStreak = Math.max(gameState.maxZeroSpendStreak, gameState.currentZeroSpendStreak);
                    checkAchievements();
                }
            }
        }

        function updateTransactionList() {
            const list = document.getElementById('transactionList');
            list.innerHTML = '';

            if (gameState.currentTransactions.length === 0) {
                list.innerHTML = '<p style="color: var(--neon-yellow); text-align: center; padding: 30px; font-size: 1.1rem;">NO TRANSACTIONS THIS MONTH</p>';
                return;
            }

            gameState.currentTransactions.forEach(t => {
                const item = document.createElement('div');
                item.className = 'transaction-item';
                item.innerHTML = `
                    <div>
                        <div style="font-weight: 700; color: var(--neon-pink); margin-bottom: 8px; font-size: 1.1rem;">${t.category}</div>
                        <div style="color: var(--neon-cyan); margin-bottom: 5px;">${t.description || 'No description'}</div>
                        <div style="color: var(--neon-purple); font-size: 0.9rem;">${new Date(t.date).toLocaleDateString()}</div>
                    </div>
                    <div style="color: var(--neon-red); font-size: 1.8rem; font-weight: 700; text-shadow: 0 0 15px var(--neon-red);">
                        -$${t.amount.toFixed(2)}
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function updateHistory() {
            const list = document.getElementById('historyList');
            if (!list) return;
            
            list.innerHTML = '';

            if (gameState.history.length === 0) {
                list.innerHTML = '<p style="color: var(--neon-yellow); text-align: center; padding: 30px; font-size: 1.1rem;">NO BATTLE HISTORY YET</p>';
                return;
            }

            gameState.history.forEach(entry => {
                const monthDate = new Date(entry.month + '-01');
                const monthName = monthDate.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
                
                const historyItem = document.createElement('div');
                historyItem.className = 'history-month';
                
                let categoryHTML = '';
                Object.entries(entry.spending).forEach(([cat, spent]) => {
                    const budget = gameState.budgets[cat] || 0;
                    categoryHTML += `
                        <div class="category-item">
                            <div style="color: var(--neon-yellow); margin-bottom: 5px; font-weight: 700;">${cat}</div>
                            <div style="color: var(--neon-cyan);">$${spent.toFixed(2)} / $${budget.toFixed(2)}</div>
                        </div>
                    `;
                });
                
                historyItem.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 2px solid var(--neon-pink);">
                        <div style="color: var(--neon-pink); font-size: 1.3rem; font-weight: 700; text-shadow: 0 0 15px var(--neon-pink);">${monthName.toUpperCase()}</div>
                        <div class="history-result ${entry.result}">
                            ${entry.result === 'victory' ? 'VICTORY' : 'DEFEAT'}
                        </div>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <div style="color: var(--neon-cyan); margin-bottom: 5px;">SPENT: $${entry.totalSpent.toFixed(2)}</div>
                        <div style="color: var(--neon-yellow); margin-bottom: 5px;">BUDGET: $${entry.totalBudget.toFixed(2)}</div>
                        <div style="color: ${entry.result === 'victory' ? 'var(--neon-cyan)' : 'var(--neon-red)'}; font-weight: 700;">
                            ${entry.result === 'victory' ? 'UNDER' : 'OVER'} BY: $${Math.abs(entry.totalBudget - entry.totalSpent).toFixed(2)}
                        </div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                        ${categoryHTML}
                    </div>
                `;
                
                list.appendChild(historyItem);
            });
        }

        function updateCategoryDropdown() {
            const select = document.getElementById('category');
            select.innerHTML = '<option value="">-- SELECT CATEGORY --</option>';
            
            Object.keys(gameState.budgets).sort().forEach(cat => {
                const option = document.createElement('option');
                option.value = cat;
                option.textContent = cat.toUpperCase();
                select.appendChild(option);
            });
        }

        function updateCategoryManager() {
            const container = document.getElementById('categoryManager');
            container.innerHTML = '';

            Object.entries(gameState.budgets).sort().forEach(([category, budget]) => {
                const item = document.createElement('div');
                item.className = 'category-manager';
                item.innerHTML = `
                    <input type="text" value="${category}" id="cat-name-${category}" placeholder="Category Name">
                    <input type="number" value="${budget}" id="cat-budget-${category}" min="0" step="10" placeholder="Budget">
                    <button class="delete-btn" onclick="deleteCategory('${category}')">DELETE</button>
                `;
                container.appendChild(item);
            });

            const saveBtn = document.createElement('button');
            saveBtn.textContent = 'SAVE CHANGES';
            saveBtn.style.width = '100%';
            saveBtn.style.marginTop = '20px';
            saveBtn.onclick = saveCategoryChanges;
            container.appendChild(saveBtn);
        }

        function addNewCategory() {
            const name = prompt('Enter category name:');
            if (!name) return;
            
            const cleanName = name.trim();
            if (gameState.budgets[cleanName]) {
                alert('Category already exists!');
                return;
            }
            
            const budget = parseFloat(prompt('Enter monthly budget:'));
            if (!budget || budget <= 0) {
                alert('Invalid budget amount!');
                return;
            }
            
            gameState.budgets[cleanName] = budget;
            gameState.currentSpending[cleanName] = 0;
            
            saveGameState();
            updateCategoryManager();
            updateCategoryDropdown();
        }

        function deleteCategory(category) {
            if (!confirm(`Delete category "${category}"? This will remove all associated data!`)) {
                return;
            }
            
            delete gameState.budgets[category];
            delete gameState.currentSpending[category];
            
            saveGameState();
            updateCategoryManager();
            updateCategoryDropdown();
        }

        function saveCategoryChanges() {
            const newBudgets = {};
            const newSpending = {};
            
            Object.keys(gameState.budgets).forEach(oldName => {
                const nameInput = document.getElementById(`cat-name-${oldName}`);
                const budgetInput = document.getElementById(`cat-budget-${oldName}`);
                
                if (!nameInput || !budgetInput) return;
                
                const newName = nameInput.value.trim();
                const newBudget = parseFloat(budgetInput.value);
                
                if (!newName || !newBudget || newBudget <= 0) {
                    alert(`Invalid data for category: ${oldName}`);
                    return;
                }
                
                newBudgets[newName] = newBudget;
                newSpending[newName] = gameState.currentSpending[oldName] || 0;
            });
            
            gameState.budgets = newBudgets;
            gameState.currentSpending = newSpending;
            
            calculateHealth();
            saveGameState();
            updateCategoryManager();
            updateCategoryDropdown();
            alert('Categories updated successfully!');
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');

            if (tabName === 'achievements') {
                updateAchievements();
            }
            if (tabName === 'history') {
                updateHistory();
            }
            if (tabName === 'settings') {
                updateCategoryManager();
            }
        }

        function resetCurrentMonth() {
            if (!confirm('RESET THIS MONTH? ALL CURRENT DATA WILL BE LOST!')) return;
            
            gameState.currentSpending = {};
            gameState.currentTransactions = [];
            gameState.playerHealth = 100;
            gameState.nemesisHealth = 100;
            
            Object.keys(gameState.budgets).forEach(cat => {
                gameState.currentSpending[cat] = 0;
            });
            
            saveGameState();
            updateDisplay();
            updateBattleScreen();
            showModal('victoryModal', 'MONTH RESET!', 'NEW BATTLE BEGINS!');
        }

        function resetAllData() {
            if (!confirm('DELETE ALL DATA? THIS CANNOT BE UNDONE!')) return;
            if (!confirm('ARE YOU ABSOLUTELY SURE? ALL HISTORY WILL BE LOST!')) return;
            
            localStorage.removeItem('budgetNemesisState');
            location.reload();
        }

        function exportData() {
            const dataStr = JSON.stringify(gameState, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `budget-nemesis-backup-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            showModal('victoryModal', 'DATA EXPORTED!', 'BACKUP FILE DOWNLOADED!');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    gameState = { ...gameState, ...imported };
                    saveGameState();
                    updateDisplay();
                    updateBattleScreen();
                    updateAchievements();
                    updateHistory();
                    updateCategoryDropdown();
                    showModal('victoryModal', 'DATA IMPORTED!', 'BACKUP RESTORED SUCCESSFULLY!');
                } catch (error) {
                    alert('ERROR: INVALID BACKUP FILE!');
                }
            };
            reader.readAsText(file);
            
            event.target.value = '';
        }

        function showModal(modalId, title, message) {
            document.getElementById(modalId).classList.add('active');
            const titleEl = document.getElementById(modalId).querySelector('.modal-title');
            const messageEl = document.getElementById(modalId === 'victoryModal' ? 'victoryMessage' : 'defeatMessage');
            if (title) titleEl.textContent = title;
            messageEl.innerHTML = message;
        }

        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => modal.classList.remove('active'));
        }

        function saveGameState() {
            localStorage.setItem('budgetNemesisState', JSON.stringify(gameState));
        }

        function loadGameState() {
            const saved = localStorage.getItem('budgetNemesisState');
            if (saved) {
                const loaded = JSON.parse(saved);
                gameState = { ...gameState, ...loaded };
            }
        }

        init();

        setInterval(() => {
            checkMonthReset();
            updateDisplay();
        }, 3600000);
    </script>
</body>
</html>
